<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Java项目实战-瑞吉外卖 | LXY's Notes</title><meta name="author" content="expAddThree"><meta name="copyright" content="expAddThree"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="瑞吉外卖 1 开发环境搭建1.1 MySQL1.1.1 图形化界面搭建 然后导入sql文件 1.1.2 命令行搭建cmd之后输入 1mysql -h[XXX] -u[XXX] -p[XXX] -h表示服务器名，localhost表示本地，-hlocalhost 可不输入； -u为数据库用户名，root是mysql默认用户名； -p为密码，如果设置了密码，可直接在-p后链接输入，如：-p123456">
<meta property="og:type" content="article">
<meta property="og:title" content="Java项目实战-瑞吉外卖">
<meta property="og:url" content="http://example.com/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/index.html">
<meta property="og:site_name" content="LXY's Notes">
<meta property="og:description" content="瑞吉外卖 1 开发环境搭建1.1 MySQL1.1.1 图形化界面搭建 然后导入sql文件 1.1.2 命令行搭建cmd之后输入 1mysql -h[XXX] -u[XXX] -p[XXX] -h表示服务器名，localhost表示本地，-hlocalhost 可不输入； -u为数据库用户名，root是mysql默认用户名； -p为密码，如果设置了密码，可直接在-p后链接输入，如：-p123456">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/kanna.jpg">
<meta property="article:published_time" content="2024-11-06T11:41:33.000Z">
<meta property="article:modified_time" content="2024-11-10T09:28:08.584Z">
<meta property="article:author" content="expAddThree">
<meta property="article:tag" content="JavaProject">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/kanna.jpg"><link rel="shortcut icon" href="/img/myIcon.png"><link rel="canonical" href="http://example.com/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":-1,"unescape":true,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Java项目实战-瑞吉外卖',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-10 17:28:08'
}</script><link rel="stylesheet" href="/css/modify.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/background-1.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/kanna.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">59</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">LXY's Notes</span></a><a class="nav-page-title" href="/"><span class="site-name">Java项目实战-瑞吉外卖</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Java项目实战-瑞吉外卖</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-11-06T11:41:33.000Z" title="发表于 2024-11-06 19:41:33">2024-11-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-11-10T09:28:08.584Z" title="更新于 2024-11-10 17:28:08">2024-11-10</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/JavaProject/">JavaProject</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="瑞吉外卖"><a href="#瑞吉外卖" class="headerlink" title="瑞吉外卖"></a>瑞吉外卖</h1><img src="/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/image-20241106194404668.png" class="" title="image-20241106194404668">
<h1 id="1-开发环境搭建"><a href="#1-开发环境搭建" class="headerlink" title="1 开发环境搭建"></a>1 开发环境搭建</h1><h2 id="1-1-MySQL"><a href="#1-1-MySQL" class="headerlink" title="1.1 MySQL"></a>1.1 MySQL</h2><h3 id="1-1-1-图形化界面搭建"><a href="#1-1-1-图形化界面搭建" class="headerlink" title="1.1.1 图形化界面搭建"></a>1.1.1 图形化界面搭建</h3><p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241106194544988.png" alt="image-20241106194544988" style="zoom:67%;"></p>
<p>然后导入sql文件</p>
<h3 id="1-1-2-命令行搭建"><a href="#1-1-2-命令行搭建" class="headerlink" title="1.1.2 命令行搭建"></a>1.1.2 命令行搭建</h3><p>cmd之后输入</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h[XXX] -u[XXX] -p[XXX]</span><br></pre></td></tr></tbody></table></figure>
<p>-h表示服务器名，localhost表示本地，-hlocalhost 可不输入；</p>
<p>-u为数据库用户名，root是mysql默认用户名；</p>
<p>-p为密码，如果设置了密码，可直接在-p后链接输入，如：-p123456，用户没有设置密码，显示Enter password时，直接回车即可。）如果密码中带有特殊字符，如&amp;等，可以-p后面不直接输入密码，回车后，手动在Enter password：后面输入密码。</p>
<p><strong>需要注意的是没有空格</strong></p>
<img src="/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/image-20241106194742684.png" class="" title="image-20241106194742684">
<p>查看数据库(<strong>注意分号</strong>)</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br></pre></td></tr></tbody></table></figure>
<p>创建数据库(<strong>注意分号</strong>)</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database reggie <span class="type">character</span> <span class="keyword">set</span> utf8mb4;</span><br></pre></td></tr></tbody></table></figure>
<p>然后导入一下sql文件，建表就行了</p>
<p>注意sqlpath是sql文件路径，绝对的就行，然后路径最好不要有中文，怕解析失败。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use reggie;</span><br><span class="line">source sqlpath</span><br><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></tbody></table></figure>
<h2 id="1-2-创建Maven项目"><a href="#1-2-创建Maven项目" class="headerlink" title="1.2 创建Maven项目"></a>1.2 创建Maven项目</h2><p>没啥好说的</p>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241106201321918.png" alt="image-20241106201321918" style="zoom: 50%;"></p>
<p>建好之后看一下JDK、JRE和Maven配置就行了。</p>
<p>之后陪一下pom.xml，再导入yml等配置文件</p>
<h2 id="1-3-初始操作"><a href="#1-3-初始操作" class="headerlink" title="1.3 初始操作"></a>1.3 初始操作</h2><h3 id="1-3-1-编写启动类"><a href="#1-3-1-编写启动类" class="headerlink" title="1.3.1 编写启动类"></a>1.3.1 编写启动类</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 日志</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="comment">// 表示是一个SpringBoot项目</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReggieApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 公式写法</span></span><br><span class="line">        SpringApplication.run(ReggieApplication.class, args);</span><br><span class="line">        <span class="comment">// log是slf4j带的</span></span><br><span class="line">        log.info(<span class="string">"项目启动成功..."</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>启动结果</p>
<img src="/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/image-20241106202401723.png" class="" title="image-20241106202401723">
<h3 id="1-3-2-导入前端"><a href="#1-3-2-导入前端" class="headerlink" title="1.3.2 导入前端"></a>1.3.2 导入前端</h3><p>这个项目侧重后端</p>
<p>注意静态页面不要直接放到resource下面，这样会访问不到</p>
<p>因为默认情况下只能访问static或者是termplate下面的资源</p>
<p>当然也可以通过配置类来设置静态资源的映射，指定目录，告诉mvc框架指定的目录下面放的就是静态资源，直接放行。</p>
<p>创建一个config文件夹，存储配置文件，在com.atlxy.reggie下面，然后编写一个配置类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="comment">// 标明是一个配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcConfig</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置静态资源映射</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> {</span><br><span class="line">        log.info(<span class="string">"开始静态资源映射..."</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">"/backend/**"</span>).addResourceLocations(<span class="string">"classpath:/backend/"</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">"/front/**"</span>).addResourceLocations(<span class="string">"classpath:/front/"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>就是查询到路径中有什么，然后就给他映射到哪里去</p>
</blockquote>
<p>这样就可以正常访问了</p>
<img src="/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/image-20241106203416180.png" class="" title="image-20241106203416180">
<h1 id="2-功能开发"><a href="#2-功能开发" class="headerlink" title="2 功能开发"></a>2 功能开发</h1><ul>
<li>需求分析</li>
<li>代码开发</li>
<li>功能测试</li>
</ul>
<h2 id="2-1-登录"><a href="#2-1-登录" class="headerlink" title="2.1 登录"></a>2.1 登录</h2><p>button login ——&gt; controller  ——&gt; service  ——&gt; mapper  ——&gt; database</p>
<p>登录流程：</p>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241106213750231.png" alt="image-20241106213750231" style="zoom:67%;"></p>
<p>看一下登录界面代码，看得出来后端应该返回的内容包括什么。</p>
<img src="/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/image-20241106204654002.png" class="" title="image-20241106204654002">
<h3 id="2-1-1-创建实体类"><a href="#2-1-1-创建实体类" class="headerlink" title="2.1.1 创建实体类"></a>2.1.1 创建实体类</h3><p>放在com.atlxy.reggie的entity包下面</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atlxy.reggie.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 员工实体</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String idNumber;<span class="comment">// 身份证号码</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 字段仅在插入时填充</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> Long createUser;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字段在插入和更新时都填充</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> Long updateUser;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="2-1-2-基础配置"><a href="#2-1-2-基础配置" class="headerlink" title="2.1.2 基础配置"></a>2.1.2 基础配置</h3><p>接下来创建Controller、Service、Mapper</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;Employee&gt; {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;EmployeeMapper, Employee&gt; <span class="keyword">implements</span> <span class="title class_">EmployeeService</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Employee&gt; {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/employee")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeController</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeService employeeService;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="2-1-3-创建通用返回结果类"><a href="#2-1-3-创建通用返回结果类" class="headerlink" title="2.1.3 创建通用返回结果类"></a>2.1.3 创建通用返回结果类</h3><p>创建返回结果类R，他是通用的， 服务端响应的所有结果最终都会包装成此种类型返回给前端页面。</p>
<p>放在common包下面</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 全局统一返回结果</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span>&lt;T&gt; {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer code; <span class="comment">//编码：1成功，0和其它数字为失败</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String msg; <span class="comment">//错误信息</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> T data; <span class="comment">//数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>(); <span class="comment">//动态数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; R&lt;T&gt; <span class="title function_">success</span><span class="params">(T object)</span> {</span><br><span class="line">        R&lt;T&gt; r = <span class="keyword">new</span> <span class="title class_">R</span>&lt;T&gt;();</span><br><span class="line">        r.data = object;</span><br><span class="line">        r.code = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; R&lt;T&gt; <span class="title function_">error</span><span class="params">(String msg)</span> {</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.msg = msg;</span><br><span class="line">        r.code = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> R&lt;T&gt; <span class="title function_">add</span><span class="params">(String key, Object value)</span> {</span><br><span class="line">        <span class="built_in">this</span>.map.put(key, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="2-1-4-编写登录方法"><a href="#2-1-4-编写登录方法" class="headerlink" title="2.1.4 编写登录方法"></a>2.1.4 编写登录方法</h3><p>处理逻辑：</p>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241106213805994.png" alt="image-20241106213805994" style="zoom:67%;"></p>
<p>EmployeeController方法中</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping("/login")</span></span><br><span class="line"><span class="keyword">public</span> R&lt;Employee&gt; <span class="title function_">login</span><span class="params">(HttpServletRequest request, <span class="meta">@RequestBody</span> Employee employee)</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>前端传过来的用户名密码是Json，所以这里用@RequestBody将其封装成一个Employee对象，至于HttpServletRequest，是因为要是登陆成功，我需要把Employee的id的信息存到Session当中，这样可以在之后随时获取到当前的登录用户，用HttpServletRequest这个可以get到Session。</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping("/login")</span></span><br><span class="line"><span class="keyword">public</span> R&lt;Employee&gt; <span class="title function_">login</span><span class="params">(HttpServletRequest request, <span class="meta">@RequestBody</span> Employee employee)</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> employee.getPassword();</span><br><span class="line">    password = DigestUtils.md5DigestAsHex(password.getBytes());</span><br><span class="line">    <span class="comment">// 包装查询对象</span></span><br><span class="line">    LambdaQueryWrapper&lt;Employee&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(Employee::getUsername, employee.getUsername());</span><br><span class="line">    <span class="comment">// 这里调用getOne是因为在数据库中用户的ID是唯一的，所以我只会查到一条数据</span></span><br><span class="line">    <span class="type">Employee</span> <span class="variable">emp</span> <span class="operator">=</span> employeeService.getOne(queryWrapper);</span><br><span class="line">    <span class="keyword">if</span> (emp == <span class="literal">null</span>) {</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="string">"登录失败 用户不存在!"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (!emp.getPassword().equals(password)) {</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="string">"登录失败 密码错误!"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (emp.getStatus() == <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="string">"登录失败 账号已禁用!"</span>);</span><br><span class="line">    }</span><br><span class="line">    request.getSession().setAttribute(<span class="string">"employee"</span>, emp.getId());</span><br><span class="line">    <span class="keyword">return</span> R.success(emp);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>这里运行的时候会有个问题就是</p>
<blockquote>
<p>Property ‘sqlSessionFactory’ or ‘sqlSessionTemplate’ are required</p>
</blockquote>
<p>诸如此类的，原因是springboot版本太低了，所以我从2.3.5升级到了2.7.12就没事了。</p>
<p>之前前端的vue代码写的是如果登录成功就会把返回的Employee封装成Json，存到userInfo中，这时候可以查到</p>
<img src="/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/image-20241106222144256.png" class="" title="image-20241106222144256">
<h3 id="2-1-5-退出功能实现"><a href="#2-1-5-退出功能实现" class="headerlink" title="2.1.5 退出功能实现"></a>2.1.5 退出功能实现</h3><p>用户点击退出时，发送请求，请求地址为/employee/logout，请求方式为POST</p>
<p>处理逻辑为：</p>
<ul>
<li>清除Session中的用户id</li>
<li>返回结果</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping("/logout")</span></span><br><span class="line"><span class="keyword">public</span> R&lt;String&gt; <span class="title function_">loginOut</span><span class="params">(HttpServletRequest request)</span> {</span><br><span class="line">    request.getSession().removeAttribute(<span class="string">"employee"</span>);</span><br><span class="line">    <span class="keyword">return</span> R.success(<span class="string">"退出成功"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="2-1-6-功能完善"><a href="#2-1-6-功能完善" class="headerlink" title="2.1.6 功能完善"></a>2.1.6 功能完善</h3><p>目前存在问题：用户如果不登录直接访问系统首页，也可以正常访问，所以应该使用过滤器或者拦截器，在过滤器或者拦截器中判断用户是否已经完成登录，如果没有登录则跳转到登录页面。</p>
<ul>
<li>创建自定义过滤器LoginCheckFilter</li>
<li>在启动类，上加入注解@ServletComponentScan（开启组件扫描，这样才会去扫描过滤器）</li>
<li>完善过滤器的处理逻辑</li>
</ul>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241109124926618.png" alt="image-20241109124926618" style="zoom:50%;"></p>
<p>初步测试</p>
<p>启动类加上注解（不粘代码了）</p>
<p>过滤器测试</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@WebFilter(filterName = "loginCheckFilter", urlPatterns = "/*")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheckFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException {</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line">        log.info(<span class="string">"拦截到请求：{}"</span>, request.getRequestURI());</span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>最终实现</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@WebFilter(filterName = "loginCheckFilter", urlPatterns = "/*")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheckFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> {</span><br><span class="line">    <span class="comment">// 路径匹配器，支持通配符</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">AntPathMatcher</span> <span class="variable">PATH_MATCHER</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AntPathMatcher</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException {</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line">        log.info(<span class="string">"拦截到请求：{}"</span>, request.getRequestURI());</span><br><span class="line">        <span class="comment">// 获取本次请求的URI</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        String[] urls = <span class="keyword">new</span> <span class="title class_">String</span>[]{</span><br><span class="line">                <span class="string">"/employee/login"</span>,</span><br><span class="line">                <span class="string">"/employee/logout"</span>,</span><br><span class="line">                <span class="string">"/backend/**"</span>,</span><br><span class="line">                <span class="string">"/front/**"</span>,</span><br><span class="line">                <span class="string">"/common/**"</span>,</span><br><span class="line">                <span class="string">"/user/sendMsg"</span>,</span><br><span class="line">                <span class="string">"/user/login"</span></span><br><span class="line">        };</span><br><span class="line">        <span class="comment">// 判断请求是否需要处理</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">check</span> <span class="operator">=</span> check(urls, requestURI);</span><br><span class="line">        <span class="comment">// 如果不需要处理，则直接放行</span></span><br><span class="line">        <span class="keyword">if</span> (check) {</span><br><span class="line">            log.info(<span class="string">"本次请求{}不需要处理"</span>, requestURI);</span><br><span class="line">            chain.doFilter(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// 判断登录状态，如果已经登录，则直接放行</span></span><br><span class="line">        <span class="keyword">if</span> (request.getSession().getAttribute(<span class="string">"employee"</span>) != <span class="literal">null</span>) {</span><br><span class="line">            log.info(<span class="string">"用户已登录，用户id为：{}"</span>, request.getSession().getAttribute(<span class="string">"employee"</span>));</span><br><span class="line">            chain.doFilter(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// 如果没用登录则返回未登录结果，通过输出流方式向客户端页面响应数据</span></span><br><span class="line">        log.info(<span class="string">"用户未登录"</span>);</span><br><span class="line">        response.getWriter().write(JSON.toJSONString(R.error(<span class="string">"NOTLOGIN"</span>)));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断本次请求是否需要放行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> urls</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> requestURI</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">check</span><span class="params">(String[] urls, String requestURI)</span>{</span><br><span class="line">        <span class="keyword">for</span> (String url : urls) {</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">match</span> <span class="operator">=</span> PATH_MATCHER.match(url, requestURI);</span><br><span class="line">            <span class="keyword">if</span> (match) {</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>
<p>注意上面这个未登录这里这么写是根据前端代码来的</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">log.info(<span class="string">"用户未登录"</span>);</span><br><span class="line">response.getWriter().write(JSON.toJSONString(R.error(<span class="string">"NOTLOGIN"</span>)));</span><br></pre></td></tr></tbody></table></figure>
<p>前端：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="number">0</span> &amp;&amp; res.<span class="property">data</span>.<span class="property">msg</span> === <span class="string">'NOTLOGIN'</span>) {<span class="comment">// 返回登录页面</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'---/backend/page/login/login.html---'</span>)</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">'userInfo'</span>)</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">top</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">'/backend/page/login/login.html'</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>
<h2 id="2-2-员工管理"><a href="#2-2-员工管理" class="headerlink" title="2.2 员工管理"></a>2.2 员工管理</h2><h3 id="2-2-1-新增员工"><a href="#2-2-1-新增员工" class="headerlink" title="2.2.1 新增员工"></a>2.2.1 新增员工</h3><p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241110125349626.png" alt="image-20241110125349626" style="zoom:50%;"></p>
<p>大体流程：</p>
<ul>
<li>页面发送ajax请求，将新增员工页面中输入的数据以json的形式提交到服务端</li>
<li>服务端Controller接收页面提交的数据并调用Service将数据进行保存</li>
<li>Service调用Mapper操作数据库，保存数据</li>
</ul>
<p>这个请求是以POST方式发送到<a target="_blank" rel="noopener" href="http://localhost:8081/employee上去的">http://localhost:8081/employee上去的</a></p>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241110130516044.png" alt="image-20241110130516044" style="zoom:67%;"></p>
<p>Payload为：</p>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241110131717034.png" alt="image-20241110131717034" style="zoom:67%;"></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 新增员工</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line"><span class="keyword">public</span> R&lt;String&gt; <span class="title function_">save</span><span class="params">(HttpServletRequest request, <span class="meta">@RequestBody</span> Employee employee)</span> {</span><br><span class="line">    log.info(<span class="string">"新增员工，员工信息：{}"</span>, employee.toString());</span><br><span class="line">    <span class="comment">// 设置初始密码123456，需要进行md5加密处理</span></span><br><span class="line">    employee.setPassword(DigestUtils.md5DigestAsHex(<span class="string">"123456"</span>.getBytes()));</span><br><span class="line">    employee.setCreateTime(LocalDateTime.now());</span><br><span class="line">    employee.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    <span class="type">Long</span> <span class="variable">empId</span> <span class="operator">=</span> (Long) request.getSession().getAttribute(<span class="string">"employee"</span>);</span><br><span class="line">    <span class="comment">// 谁创建的这个用户</span></span><br><span class="line">    employee.setCreateUser(empId);</span><br><span class="line">    <span class="comment">// 谁更新的这个用户</span></span><br><span class="line">    employee.setUpdateUser(empId);</span><br><span class="line">    <span class="comment">// 这个save函数是MybatisPlus的，前面employeeService继承了IService</span></span><br><span class="line">    employeeService.save(employee);</span><br><span class="line">    <span class="keyword">return</span> R.success(<span class="string">"新增员工成功"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>1 @RequestBody 注解在 Spring 框架中用于将 HTTP 请求体中的数据绑定到方法参数上。具体来说，它可以将请求体中的 JSON 数据自动转换为 Java 对象。以下是几点需要注意的：</p>
<ul>
<li>框架支持：@RequestBody 是 Spring MVC 和 Spring Boot 中提供的注解。</li>
<li>使用场景：通常用于处理 POST 或 PUT 请求，这些请求通常会携带一个 JSON 格式的请求体。</li>
<li>数据转换：Spring 会自动调用相应的 HttpMessageConverter 来将 JSON 数据转换为指定的 Java 对象。</li>
</ul>
<p>2 当用户名重复时，会抛出异常，此时有两种处理方式：</p>
<ul>
<li>在Controller方法中加入try、catch进行异常捕获</li>
<li>使用异常处理器进行全局异常捕获（底层是基于代理，会代理这些Controller，拦截到那些方法，有了异常就在这个异常处理类类重进行处理）</li>
</ul>
<blockquote>
<p>选第二个，因为如果用try、catch的话可能会重复写很多次</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLIntegrityConstraintViolationException;</span><br><span class="line"><span class="comment">// 拦截加了某些注解的Controller</span></span><br><span class="line"><span class="meta">@ControllerAdvice(annotations = {RestController.class, Controller.class})</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理SQL异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// 参数是处理那些异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(SQLIntegrityConstraintViolationException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R&lt;String&gt; <span class="title function_">exceptionHandler</span><span class="params">(SQLIntegrityConstraintViolationException ex)</span>{</span><br><span class="line">		log.error(ex.getMessage());</span><br><span class="line">        <span class="comment">// 判断是否是重复添加</span></span><br><span class="line">        <span class="keyword">if</span>(ex.getMessage().contains(<span class="string">"Duplicate entry"</span>)){</span><br><span class="line">            String[] split = ex.getMessage().split(<span class="string">" "</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> split[<span class="number">2</span>] + <span class="string">"已存在"</span>;</span><br><span class="line">            <span class="keyword">return</span> R.error(msg);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="string">"未知错误"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>比如重复添加用户名时报错：Duplicate entry ‘lxy’ for key ‘idx_username’</p>
<p>这时候他是空格分割的，取第二个可以取到名字</p>
</blockquote>
<h3 id="2-2-2-员工信息分页查询"><a href="#2-2-2-员工信息分页查询" class="headerlink" title="2.2.2 员工信息分页查询"></a>2.2.2 员工信息分页查询</h3><p>流程：</p>
<ul>
<li>页面发送ajax请求，将分页查询参数(page、pageSize、name)提交到服务端</li>
<li>服务端Controller接收页面提交的数据并调用Service查询数据</li>
<li>Service调用Mapper操作数据库，查询分页数据</li>
<li>Controller将查询到的分页数据响应给页面</li>
<li>页面接收到分页数据并通过ElementUl的Table组件展示到页面上</li>
</ul>
<p>页面请求：</p>
<img src="/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/image-20241110142900553.png" class="" title="image-20241110142900553">
<p>Payload：</p>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241110142920018.png" alt="image-20241110142920018" style="zoom:67%;"></p>
<p>前端显示是，数据格式要求：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> <span class="title function_">getMemberList</span>(params).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">String</span>(res.<span class="property">code</span>) === <span class="string">'1'</span>) {</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">records</span> || []</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">counts</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>
<p>首先编写一个配置类，实现分页插件，MybatisPlus中有相关的类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MybatisPlus配置插件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">mybatisPlusInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        mybatisPlusInterceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> mybatisPlusInterceptor;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>编写方法：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 员工信息分页查询</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> page</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageSize</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping("/page")</span></span><br><span class="line"><span class="keyword">public</span> R&lt;Page&gt; <span class="title function_">page</span><span class="params">(<span class="type">int</span> page, <span class="type">int</span> pageSize, String name)</span> {</span><br><span class="line">    log.info(<span class="string">"page = {}, pageSize = {}, name = {}"</span>, page, pageSize, name);</span><br><span class="line">    <span class="comment">// 分页构造器</span></span><br><span class="line">    <span class="type">Page</span> <span class="variable">pageInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Page</span>(page, pageSize);</span><br><span class="line">    <span class="comment">// 条件构造器</span></span><br><span class="line">    LambdaQueryWrapper&lt;Employee&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>();</span><br><span class="line">    <span class="comment">// 添加过滤条件</span></span><br><span class="line">    queryWrapper.like(StringUtils.isNotEmpty(name), Employee::getName, name);</span><br><span class="line">    <span class="comment">// 添加排序条件</span></span><br><span class="line">    queryWrapper.orderByDesc(Employee::getUpdateTime);</span><br><span class="line">    <span class="comment">// 执行查询,page方法执行完了之后这个pagInfo就会被赋值了</span></span><br><span class="line">    employeeService.page(pageInfo, queryWrapper);</span><br><span class="line">    <span class="keyword">return</span> R.success(pageInfo);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>用Page作为泛型是因为根据前端数据的处理，目前的Employee中没有records和total属性，但是MybatisPlus封装了Page类，里面有当前这一页需要展示的数据。</p>
<p>参数中有name是因为左上角查询时会发送page、pageSize以及name，这里我写了我可用可不用</p>
</blockquote>
<h3 id="2-2-3-启用-禁用员工账号"><a href="#2-2-3-启用-禁用员工账号" class="headerlink" title="2.2.3 启用 / 禁用员工账号"></a>2.2.3 启用 / 禁用员工账号</h3><p>这里需要注意的是只有管理员可以对其他普通用户进行启用、禁用操作，所以普通用户登陆系统后的启用、禁用按钮是不显示的。如果账号为正常，则按钮为禁用，否则为启用。（前端给实现了）</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button</span><br><span class="line">  type="text"</span><br><span class="line">  size="small"</span><br><span class="line">  class="delBut non"</span><br><span class="line">  @click="statusHandle(scope.row)"</span><br><span class="line">  v-if="user === 'admin'"</span><br><span class="line">&gt;</span><br><span class="line">  {{ scope.row.status == '1' ? '禁用' : '启用' }}</span><br><span class="line">&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>流程：</p>
<ul>
<li>页面发送ajax请求，将参数(id、status)提交到服务端</li>
<li>服务端Controller接收页面提交的数据并调用Service更新数据</li>
<li>Service调用Mapper操作数据库</li>
</ul>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241110153019247.png" alt="image-20241110153019247" style="zoom:67%;"></p>
<p>Payload为：</p>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241110153033416.png" alt="image-20241110153033416" style="zoom:80%;"></p>
<p>这个Payload是啥意思呢，因为status为1时显示正常，我现在要禁用他，所以返回一个0，代表我期望的值。</p>
<p>实现：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据id查询员工信息并修改status</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PutMapping</span></span><br><span class="line"><span class="keyword">public</span> R&lt;String&gt; <span class="title function_">update</span><span class="params">(HttpServletRequest request, <span class="meta">@RequestBody</span> Employee employee)</span> {</span><br><span class="line">    log.info(<span class="string">"修改状态信息:"</span> + employee.toString());</span><br><span class="line">    <span class="type">Long</span> <span class="variable">empId</span> <span class="operator">=</span> (Long) request.getSession().getAttribute(<span class="string">"employee"</span>);</span><br><span class="line">    employee.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    employee.setUpdateUser(empId);</span><br><span class="line">    employeeService.updateById(employee);</span><br><span class="line">    <span class="keyword">return</span> R.success(<span class="string">"员工信息修改成功"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>需要注意的是，现在禁用和启用是失败的，因为前端的Payload返回的id是错误的，和数据库中的并不匹配，但是前面分页时返回给前端的id是对的，这是因为前端js在处理long型数据时出现了问题，他只能确定前16位是准确的，丢失了最后三位的精度（id是19位的），四舍五入了。</p>
<p>怎么解决呢，需要服务端给页面响应Json数据时进行处理，将long型的数据统一转为String类型的字符串，这样前端js就不会再进行 “ 处理 ” 了。</p>
<p>具体实现步骤：</p>
<ul>
<li>提供对象转换器JacksonObjectMapper,基于Jackson进行Java对象到Json数据的转换</li>
<li>在WebMvcConfig配置类中扩展Spring mvc的消息转换器，在此消息转换器中使用提供的对象转换器进行]ava对象到Json数据的转换</li>
</ul>
<p>写一个这样的转换类：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对象映射器:基于jackson将Java对象转为json，或者将json转为Java对象</span></span><br><span class="line"><span class="comment"> * 将JSON解析为Java对象的过程称为 [从JSON反序列化Java对象]</span></span><br><span class="line"><span class="comment"> * 从Java对象生成JSON的过程称为 [序列化Java对象到JSON]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JacksonObjectMapper</span> <span class="keyword">extends</span> <span class="title class_">ObjectMapper</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_DATE_FORMAT</span> <span class="operator">=</span> <span class="string">"yyyy-MM-dd"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_DATE_TIME_FORMAT</span> <span class="operator">=</span> <span class="string">"yyyy-MM-dd HH:mm:ss"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_TIME_FORMAT</span> <span class="operator">=</span> <span class="string">"HH:mm:ss"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JacksonObjectMapper</span><span class="params">()</span> {</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="comment">//收到未知属性时不报异常</span></span><br><span class="line">        <span class="built_in">this</span>.configure(FAIL_ON_UNKNOWN_PROPERTIES, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//反序列化时，属性不存在的兼容处理</span></span><br><span class="line">        <span class="built_in">this</span>.getDeserializationConfig().withoutFeatures(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">SimpleModule</span> <span class="variable">simpleModule</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleModule</span>()</span><br><span class="line">                .addDeserializer(LocalDateTime.class, <span class="keyword">new</span> <span class="title class_">LocalDateTimeDeserializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT)))</span><br><span class="line">                .addDeserializer(LocalDate.class, <span class="keyword">new</span> <span class="title class_">LocalDateDeserializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT)))</span><br><span class="line">                .addDeserializer(LocalTime.class, <span class="keyword">new</span> <span class="title class_">LocalTimeDeserializer</span>(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT)))</span><br><span class="line">                .addSerializer(BigInteger.class, ToStringSerializer.instance)</span><br><span class="line">                .addSerializer(Long.class, ToStringSerializer.instance)</span><br><span class="line">                .addSerializer(LocalDateTime.class, <span class="keyword">new</span> <span class="title class_">LocalDateTimeSerializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT)))</span><br><span class="line">                .addSerializer(LocalDate.class, <span class="keyword">new</span> <span class="title class_">LocalDateSerializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT)))</span><br><span class="line">                .addSerializer(LocalTime.class, <span class="keyword">new</span> <span class="title class_">LocalTimeSerializer</span>(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//注册功能模块 例如，可以添加自定义序列化器和反序列化器</span></span><br><span class="line">        <span class="built_in">this</span>.registerModule(simpleModule);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>接下来在WebMvcConfig（项目启动时就会调用）中添加方法</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 扩展mvc框架的消息转换器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> converters the list of configured converters to extend</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">extendMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> {</span><br><span class="line">    log.info(<span class="string">"扩展消息转换器..."</span>);</span><br><span class="line">    <span class="comment">//创建消息转换器对象</span></span><br><span class="line">    <span class="type">MappingJackson2HttpMessageConverter</span> <span class="variable">messageConverter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MappingJackson2HttpMessageConverter</span>();</span><br><span class="line">    <span class="comment">//设置对象转换器，底层使用Jackson将Java对象转为json，比如返回的R.success()之类的，转换成Json返回给前端</span></span><br><span class="line">    messageConverter.setObjectMapper(<span class="keyword">new</span> <span class="title class_">JacksonObjectMapper</span>());</span><br><span class="line">    <span class="comment">//将上面的消息转换器对象追加到mvc框架的转换器集合中。</span></span><br><span class="line">    <span class="comment">// 放到0会优先使用自己定义的这个。</span></span><br><span class="line">    converters.add(<span class="number">0</span>,messageConverter);</span><br><span class="line">    log.info(<span class="string">"扩展消息转换器完成..."</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>这样就可以了。</p>
<h3 id="2-2-4-编辑员工信息"><a href="#2-2-4-编辑员工信息" class="headerlink" title="2.2.4 编辑员工信息"></a>2.2.4 编辑员工信息</h3><p>请求的页面</p>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241110162629392.png" alt="image-20241110162629392" style="zoom:67%;"></p>
<p>下面地方是VUE的信息回显，现在没实现，所以404</p>
<p><img src="/2024/11/06/Java项目实战-瑞吉外卖/image-20241110162216008.png" alt="image-20241110162216008" style="zoom:67%;"></p>
<p>流程：</p>
<ul>
<li>点击编辑按钮时，页面跳转到add.html,并在url中携带参数[员工id]</li>
<li>在add.html页面获取url中的参数[员工id]</li>
<li>发送ajax请求，请求服务端，同时提交员工id参数</li>
<li>服务端接收请求，根据员工id查询员工信息，将员工信息以Json形式响应给页面</li>
<li>页面接收服务端响应的Json数据，通过VUE的数据绑定进行员工信息回显</li>
<li>点击保存按钮，发送ajax请求，将页面中的员工信息以Json方式提交给服务端</li>
<li>服务端接收员工信息，并进行处理，完成后给页面响应</li>
<li>页面接收到服务端响应信息后进行相应处理</li>
</ul>
<p>这里需要注意的是：add.html是公共页面，新增员工和编辑员工都是在这里操作的。</p>
<p>实现：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据id查询员工信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping("/{id}")</span></span><br><span class="line"><span class="keyword">public</span> R&lt;Employee&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> {</span><br><span class="line">    log.info(<span class="string">"根据id查询员工信息"</span>);</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> employeeService.getById(id);</span><br><span class="line">    <span class="keyword">if</span> (employee != <span class="literal">null</span>) {</span><br><span class="line">        <span class="keyword">return</span> R.success(employee);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> R.error(<span class="string">"没有查询到对应员工信息"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>这里其实进行了一个判断，因为共用的一个界面，在保存时，为什么这个界面就不会因为重名问题而异常呢，当然看后端代码来说的话，update肯定不会因为重名异常。之前的是save方法，相当于新增数据，主键重复肯定不行。</p>
<p>前端进行了判断</p>
<p>编辑按钮：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template slot-scope="scope"&gt;</span><br><span class="line">  &lt;el-button</span><br><span class="line">    type="text"</span><br><span class="line">    size="small"</span><br><span class="line">    class="blueBug"</span><br><span class="line">    @click="addMemberHandle(scope.row.id)"</span><br><span class="line">    :class="{notAdmin:user !== 'admin'}"</span><br><span class="line">  &gt;</span><br><span class="line">    编辑</span><br><span class="line">  &lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>截止到现在没有做权限管理，就导致用户可以对管理员以及其他用户的信息进行编辑，这肯定不行</p>
</blockquote>
<p>调用的方法：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addMemberHandle</span> (st) {</span><br><span class="line">  <span class="keyword">if</span> (st === <span class="string">'add'</span>){</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">parent</span>.<span class="title function_">menuHandle</span>({</span><br><span class="line">      <span class="attr">id</span>: <span class="string">'2'</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">'/backend/page/member/add.html'</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">'添加员工'</span></span><br><span class="line">    },<span class="literal">true</span>)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">parent</span>.<span class="title function_">menuHandle</span>({</span><br><span class="line">      <span class="attr">id</span>: <span class="string">'2'</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">'/backend/page/member/add.html?id='</span>+st,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">'修改员工'</span></span><br><span class="line">    },<span class="literal">true</span>)</span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>他这个地方在编辑的时候传进来的是选中行的id，当添加员工时传进来的是 <code>'add'</code>字符串。</p>
</blockquote>
<p>保存按钮：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button</span><br><span class="line">  type="primary"</span><br><span class="line">  @click="submitForm('ruleForm', false)"</span><br><span class="line">&gt;</span><br><span class="line">  保存</span><br><span class="line">&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>提交函数</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">submitForm</span> (formName, st) {</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$refs</span>[formName].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (valid) {</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">actionType</span> === <span class="string">'add'</span>) {</span><br><span class="line">        <span class="keyword">const</span> params = {</span><br><span class="line">          ...<span class="variable language_">this</span>.<span class="property">ruleForm</span>,</span><br><span class="line">          <span class="attr">sex</span>: <span class="variable language_">this</span>.<span class="property">ruleForm</span>.<span class="property">sex</span> === <span class="string">'女'</span> ? <span class="string">'0'</span> : <span class="string">'1'</span></span><br><span class="line">        }</span><br><span class="line">        <span class="title function_">addEmployee</span>(params).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">          <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">1</span>) {</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">'员工添加成功！'</span>)</span><br><span class="line">            <span class="keyword">if</span> (!st) {</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">goBack</span>()</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">ruleForm</span> = {</span><br><span class="line">                <span class="attr">username</span>: <span class="string">''</span>,</span><br><span class="line">                <span class="string">'name'</span>: <span class="string">''</span>,</span><br><span class="line">                <span class="string">'phone'</span>: <span class="string">''</span>,</span><br><span class="line">                <span class="comment">// 'password': '',</span></span><br><span class="line">                <span class="comment">// 'rePassword': '',/</span></span><br><span class="line">                <span class="string">'sex'</span>: <span class="string">'男'</span>,</span><br><span class="line">                <span class="string">'idNumber'</span>: <span class="string">''</span></span><br><span class="line">              }</span><br><span class="line">            }</span><br><span class="line">          } <span class="keyword">else</span> {</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span> || <span class="string">'操作失败'</span>)</span><br><span class="line">          }</span><br><span class="line">        }).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> {</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">'请求出错了：'</span> + err)</span><br><span class="line">        })</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">const</span> params = {</span><br><span class="line">          ...<span class="variable language_">this</span>.<span class="property">ruleForm</span>,</span><br><span class="line">          <span class="attr">sex</span>: <span class="variable language_">this</span>.<span class="property">ruleForm</span>.<span class="property">sex</span> === <span class="string">'女'</span> ? <span class="string">'0'</span> : <span class="string">'1'</span></span><br><span class="line">        }</span><br><span class="line">        <span class="title function_">editEmployee</span>(params).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">          <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">1</span>) {</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">'员工信息修改成功！'</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">goBack</span>()</span><br><span class="line">          } <span class="keyword">else</span> {</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">msg</span> || <span class="string">'操作失败'</span>)</span><br><span class="line">          }</span><br><span class="line">        }).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> {</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">'请求出错了：'</span> + err)</span><br><span class="line">        })</span><br><span class="line">      }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'error submit!!'</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>它会根据actionType判断是添加还是更新操作，分为了</p>
<ul>
<li><code>addEmployee(params).then(res =&gt; { ... })</code></li>
<li><code>editEmployee(params).then(res =&gt; { ... })</code></li>
</ul>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新增---添加员工</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addEmployee</span> (<span class="params">params</span>) {</span><br><span class="line">  <span class="keyword">return</span> $axios({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/employee'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    <span class="attr">data</span>: { ...params }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改---添加员工</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">editEmployee</span> (<span class="params">params</span>) {</span><br><span class="line">  <span class="keyword">return</span> $axios({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/employee'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    <span class="attr">data</span>: { ...params }</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h1 id="3-分类管理"><a href="#3-分类管理" class="headerlink" title="3 分类管理"></a>3 分类管理</h1><h2 id="3-1-公共字段自动填充"><a href="#3-1-公共字段自动填充" class="headerlink" title="3.1 公共字段自动填充"></a>3.1 公共字段自动填充</h2><h2 id="3-2-新增分类"><a href="#3-2-新增分类" class="headerlink" title="3.2 新增分类"></a>3.2 新增分类</h2><h2 id="3-3-分类信息分页查询"><a href="#3-3-分类信息分页查询" class="headerlink" title="3.3 分类信息分页查询"></a>3.3 分类信息分页查询</h2><h2 id="3-4-删除查询"><a href="#3-4-删除查询" class="headerlink" title="3.4 删除查询"></a>3.4 删除查询</h2><h2 id="3-5-修改分来"><a href="#3-5-修改分来" class="headerlink" title="3.5 修改分来"></a>3.5 修改分来</h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">expAddThree</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/">http://example.com/2024/11/06/Java%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">LXY's Notes</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaProject/">JavaProject</a></div><div class="post-share"><div class="social-share" data-image="/img/kanna.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><a class="prev-post pull-left" href="/2024/11/09/Leetcode-Day16/" title="Leetcode-Day16"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Leetcode-Day16</div></div></a><a class="next-post pull-right" href="/2024/11/06/Leetcode-Day15/" title="Leetcode-Day15"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Leetcode-Day15</div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info is-center"><div class="avatar-img"><img src="/img/kanna.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info-name">expAddThree</div><div class="author-info-description">5L2g5aW977yBCg==</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">59</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/expAdd3"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:lixybupt@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">An announcement means no announcement! (^_^)</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96"><span class="toc-text">瑞吉外卖</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">1 开发环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-MySQL"><span class="toc-text">1.1 MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2%E6%90%AD%E5%BB%BA"><span class="toc-text">1.1.1 图形化界面搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%90%AD%E5%BB%BA"><span class="toc-text">1.1.2 命令行搭建</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E5%88%9B%E5%BB%BAMaven%E9%A1%B9%E7%9B%AE"><span class="toc-text">1.2 创建Maven项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E5%88%9D%E5%A7%8B%E6%93%8D%E4%BD%9C"><span class="toc-text">1.3 初始操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-%E7%BC%96%E5%86%99%E5%90%AF%E5%8A%A8%E7%B1%BB"><span class="toc-text">1.3.1 编写启动类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-%E5%AF%BC%E5%85%A5%E5%89%8D%E7%AB%AF"><span class="toc-text">1.3.2 导入前端</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91"><span class="toc-text">2 功能开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E7%99%BB%E5%BD%95"><span class="toc-text">2.1 登录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-text">2.1.1 创建实体类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-text">2.1.2 基础配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-%E5%88%9B%E5%BB%BA%E9%80%9A%E7%94%A8%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E7%B1%BB"><span class="toc-text">2.1.3 创建通用返回结果类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4-%E7%BC%96%E5%86%99%E7%99%BB%E5%BD%95%E6%96%B9%E6%B3%95"><span class="toc-text">2.1.4 编写登录方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-5-%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.1.5 退出功能实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-6-%E5%8A%9F%E8%83%BD%E5%AE%8C%E5%96%84"><span class="toc-text">2.1.6 功能完善</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86"><span class="toc-text">2.2 员工管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E6%96%B0%E5%A2%9E%E5%91%98%E5%B7%A5"><span class="toc-text">2.2.1 新增员工</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">2.2.2 员工信息分页查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E5%90%AF%E7%94%A8-%E7%A6%81%E7%94%A8%E5%91%98%E5%B7%A5%E8%B4%A6%E5%8F%B7"><span class="toc-text">2.2.3 启用 / 禁用员工账号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-%E7%BC%96%E8%BE%91%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-text">2.2.4 编辑员工信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%88%86%E7%B1%BB%E7%AE%A1%E7%90%86"><span class="toc-text">3 分类管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%85%AC%E5%85%B1%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85"><span class="toc-text">3.1 公共字段自动填充</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E6%96%B0%E5%A2%9E%E5%88%86%E7%B1%BB"><span class="toc-text">3.2 新增分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E5%88%86%E7%B1%BB%E4%BF%A1%E6%81%AF%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">3.3 分类信息分页查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E5%88%A0%E9%99%A4%E6%9F%A5%E8%AF%A2"><span class="toc-text">3.4 删除查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E4%BF%AE%E6%94%B9%E5%88%86%E6%9D%A5"><span class="toc-text">3.5 修改分来</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/01/20/leetcodeProblems/" title="leetcodeProblems">leetcodeProblems</a><time datetime="2025-01-20T01:57:56.000Z" title="发表于 2025-01-20 09:57:56">2025-01-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/23/%E6%AF%8F%E6%97%A51%E9%A2%98/" title="每日1题">每日1题</a><time datetime="2024-12-23T01:53:03.000Z" title="发表于 2024-12-23 09:53:03">2024-12-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/18/hot100/" title="hot100">hot100</a><time datetime="2024-12-18T13:06:39.000Z" title="发表于 2024-12-18 21:06:39">2024-12-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/09/%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95%E9%9D%A2%E8%AF%95/" title="推荐算法面试">推荐算法面试</a><time datetime="2024-12-09T05:07:50.000Z" title="发表于 2024-12-09 13:07:50">2024-12-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/09/Leetcode-Day18/" title="Leetcode-Day18">Leetcode-Day18</a><time datetime="2024-12-09T02:06:53.000Z" title="发表于 2024-12-09 10:06:53">2024-12-09</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div id="footer-wrap"><div class="copyright">©2019 - 2025 By expAddThree</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }
      
      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script></div><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>